<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>AMD Loading</title>
  </head>
  <body>
    <h1>OutterFrame</h1>
    <iframe src="api-app.html?ctx=123a-456aaaa-bbbbbbbbbbbb&amp;ctxstate=lorem%20ipsum" id="app"></iframe>
    <div id="messages"></div>
    <script type="text/javascript">
      console.log('STARTING');
      window.addEventListener('message', function(evt) {
        var div = document.createElement('DIV');
        div.id = 'message-' + evt.data.ticket;
        div.innerHTML = '<div class="event-name">' + evt.data.eventName + '</div>' +
                        '<pre class="event-data">' + JSON.stringify(evt.data.data) + '</pre>';
        document.getElementById('messages').appendChild(div);
      });
    </script>
  </body>
</html>
